<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; style-src 'self' 'unsafe-inline'; img-src 'self' data:; media-src 'self' blob:;">
  <title>Rubber Duck</title>
  <link rel="stylesheet" href="styles/reset.css">
  <link rel="stylesheet" href="styles/variables.css">
  <link rel="stylesheet" href="styles/main.css">
</head>
<body>
  <div id="app">
    <!-- Title Bar -->
    <div class="titlebar" id="titlebar">
      <span class="titlebar__title">Rubber Duck</span>
      <div class="titlebar__controls">
        <button class="titlebar__btn titlebar__btn--minimize" id="btn-minimize" title="Minimize"></button>
        <button class="titlebar__btn titlebar__btn--maximize" id="btn-maximize" title="Maximize"></button>
        <button class="titlebar__btn titlebar__btn--close" id="btn-close" title="Close"></button>
      </div>
    </div>

    <!-- Duck Area -->
    <div class="duck-area">
      <div class="duck-container" id="duck">
        <img class="duck-svg" src="assets/duck.svg" alt="Rubber Duck" draggable="false">
      </div>
    </div>

    <!-- Chat Area -->
    <div class="chat-area" id="chat-area">
      <!-- Messages will be injected here -->
    </div>

    <!-- Input Area -->
    <div class="input-area">
      <div class="input-row">
        <textarea
          class="input-field"
          id="input-field"
          placeholder="Talk to your duck..."
          rows="1"
        ></textarea>
        <button class="mic-btn" id="mic-btn" title="Voice input">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z"/>
            <path d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z"/>
          </svg>
          <div class="mic-btn__pulse"></div>
        </button>
        <button class="send-btn" id="send-btn" title="Send (Enter)">
          <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
            <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Footer -->
    <div class="footer">
      <button class="footer__btn" id="btn-new-session" title="New Session (Cmd+N)">
        + New Session
      </button>
      <div>
        <button class="footer__btn" id="btn-history" title="History (Cmd+H)">
          History
        </button>
      </div>
    </div>

    <!-- History Panel -->
    <div class="history-panel" id="history-panel">
      <div class="history-panel__header">
        <span>Sessions</span>
        <button class="history-panel__close" id="btn-history-close">&times;</button>
      </div>
      <div class="history-panel__list" id="history-list">
        <!-- Session items will be injected here -->
      </div>
    </div>
  </div>

  <script src="js/storage.js"></script>
  <script src="js/duck.js"></script>
  <script src="js/chat.js"></script>
  <script src="js/voice.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
